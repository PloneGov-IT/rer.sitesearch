<html>
<body tal:define="b_start python:0;
                  b_start request/b_start | b_start;
                  query_tab python:request.form.get('filter_tab','');
                  results python:view.results(b_start=b_start, tab=query_tab);
                  batch results/results;
                  batch_results_len batch/sequence_length;
                  total_results_len results/total_results_len | batch_results_len;
                  st python:request.get('SearchableText', '');
                  here_url context/@@plone_context_state/object_url;
                  batch_base_url string:${here_url}/@@search;
                  portal_path context/@@plone_portal_state/navigation_root_path;
                  indexes_dict results/indexes_dict|nothing;
                  indexes_order view/indexes_order;
                  tabs_mapping view/tabs_mapping;
                  tabs results/tabs|nothing;
                  selected_tab python:view.getSelectedTab(tabs);
                  ">

    <strong id="updated-search-results-number"
            tal:content="python:view.getResultsLen(results)">234</strong>

    <ul id="updated-sorting-options">
        <metal:results use-macro="context/@@search/sorting" />
    </ul>
    
    <div id="updated-path-options" tal:condition="python:request.form.get('path') and request.form.get('path') != portal_path">
        <metal:results use-macro="context/@@search/path" />
    </div>
    <metal:results use-macro="context/@@search/search_results" />
    
    <span id="updated-tab-options">
        <metal:results use-macro="context/@@search/tabs-list" />
    </span>

    <div id="updated-indexes-options" tal:condition="indexes_dict">
      <metal:indexes use-macro="context/@@search/indexes-list" />
    </div>
</body>
</html>